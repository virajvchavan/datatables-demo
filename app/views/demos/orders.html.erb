<!-- should clear:
  - server side processing
-->
<div class="card" style="margin: 40px;">
  <div class="card-section">
    <table id="people_table" class="display">
      <thead>
          <tr>
              <th>Dish</th>
              <th>Quantity</th>
              <th>Price</th>
              <th>Customer</th>
              <th>Location</th>
              <th>Order Time</th>
          </tr>
      </thead>
    </table>
  </div>
</div>

<script type="text/javascript">
  $(document).ready( function () {
    $('#people_table').DataTable({
        processing: true,
        serverSide: true,
        pageLength: 40,
        ajax: {
          type: "GET",
          url: '/orders',
          dataType: 'json'
        },
        columns: [
            { data: 'dish_name', orderable: false },
            { data: 'quantity', orderable: false },
            { data: 'price', orderable: false },
            { data: 'custome_name', orderable: false },
            { data: 'location', orderable: false },
            { data: 'created_at', orderable: false }
        ],
        drawCallback: function(settings) {
        // assuming that new orders are created at rate slower than 1 order/5 sec
          if(typeof(top_row) != 'undefined')
          {
            if(top_row < this.api().row(0).data().id)
            {
              console.log('Notification: ', this.api().row(0).data());
            }
          }
          window.top_row = this.api().row(0).data().id;
        }
    });
    setInterval(function() {
      $('#people_table').DataTable().draw();
    }, 5000);
} );
</script>
